window.stik.boundary({as:"$courier",resolvable:!0,cache:!0,to:function(){function fetchSubscriptions(box,callback){var receiverPattern,senderPattern=new RegExp(box);for(var name in subscriptions)receiverPattern=new RegExp(stringify(name)),(senderPattern.exec(stringify(name))||receiverPattern.exec(stringify(box)))&&callback(subscriptions[name])}function unsubscribe(subscription){subscriptions[subscription.box]=subscriptions[subscription.box].filter(function(subs){return subs.id!==subscription.id}),0===subscriptions[subscription.box].length&&delete subscriptions[subscription.box]}function createSubscription(spec){return spec.id="#"+Math.floor(16777215*Math.random()).toString(16),spec}function stringify(name){return name.toString().replace(/(^\/|\/$)/g,"")}var obj={},subscriptions={};return obj.receive=function(box,opener){var subscription=createSubscription({box:stringify(box),opener:opener});return subscriptions[box]=subscriptions[box]||[],subscriptions[box].push(subscription),unsubscribe.bind({},subscription)},obj.send=function(box,message,options){var i=0,foundAny=!1;if(options=options||{throwOnMissing:!0},fetchSubscriptions(box,function(openers){for(foundAny=!0,i=openers.length;i--;)openers[i].opener(message)}),!foundAny&&options.throwOnMissing===!0)throw"Stik: No receiver registered for '"+box+"'"},obj.reset=function(){subscriptions={}},obj}});